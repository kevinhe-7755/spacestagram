var H=Object.defineProperty,W=Object.defineProperties;var U=Object.getOwnPropertyDescriptors;var f=Object.getOwnPropertySymbols;var C=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable;var L=(e,t,r)=>t in e?H(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,u=(e,t)=>{for(var r in t||(t={}))C.call(t,r)&&L(e,r,t[r]);if(f)for(var r of f(t))x.call(t,r)&&L(e,r,t[r]);return e},p=(e,t)=>W(e,U(t));var v=(e,t)=>{var r={};for(var a in e)C.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&f)for(var a of f(e))t.indexOf(a)<0&&x.call(e,a)&&(r[a]=e[a]);return r};import{j as s,M as $,V as q,r as l,a as h,B as z,b as T,c as Y,R as M,d as G,C as K,S as V,e as Z,f as N,T as X,g as J,P as Q,E as ee,F as te,h as re,A as se,i as ae}from"./vendor.f5d5c968.js";const oe=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function r(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerpolicy&&(n.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?n.credentials="include":o.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(o){if(o.ep)return;o.ep=!0;const n=r(o);fetch(o.href,n)}};oe();const ne=({liked:e})=>e?s("svg",{className:"heart__solid","aria-hidden":"true",focusable:"false",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:s("path",{d:"M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3 0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z"})}):s("svg",{className:"heart__regular","aria-hidden":"true",focusable:"false",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:s("path",{d:"M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3 0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z"})}),ce=({title:e,liked:t,explanation:r,media_type:a,url:o,onLike:n,thumbnail_url:i})=>s($,{title:e,primaryAction:{content:t?"Unlike":"Like",onAction:()=>n(),icon:()=>s(ne,{liked:t})},description:r,portrait:!0,children:a==="image"?s("img",{alt:r,title:e,width:"100%",height:"100%",style:{objectFit:"cover",objectPosition:"center"},src:o}):s(q,{thumbnailUrl:i||"",onClick:()=>window.open(o)})}),ie=({title:e,subtitle:t,showSubtitle:r=!0})=>{const a=l.exports.useContext(I);return h("div",{className:"topbar",children:[h("div",{className:"topbar__header",children:[s("p",{className:"topbar__title",children:e}),s("p",{className:`topbar__subtitle${r?"":"__hidden"}`,children:t})]}),s("div",{className:"topbar__theme",children:h(z,{segmented:!0,children:[s(T,{pressed:a.scheme==="light",onClick:()=>a.switchColorScheme("light"),children:"Light"}),s(T,{pressed:a.scheme==="dark",onClick:()=>a.switchColorScheme("dark"),children:"Dark"})]})})]})},le={className:"masonry",elementType:"ul",options:{itemSelector:".masonry__item",columnWidth:".masonry__item"}},de=r=>{var a=r,{children:e}=a,t=v(a,["children"]);const o=u(u({},le),t);return s(Y,p(u({},o),{children:e}))},O=(e,t)=>r=>M.createElement(e,{className:"masonry__item"},s(t,u({},r))),me=({height:e=G(600,1e3)})=>s("div",{className:"skeletonCard__wrapper",style:{height:e},children:h(K,{children:[s(V,{}),s(Z,{}),s(N,{}),s(N,{})]})}),ue=l.exports.memo(me),I=l.exports.createContext({switchColorScheme:e=>{},scheme:""}),he=a=>{var o=a,{theme:e,children:t}=o,r=v(o,["theme","children"]);const n=(e==null?void 0:e.colorScheme)==="light"?"light":"dark",[i,y]=l.exports.useState(n),S=l.exports.useMemo(()=>({switchColorScheme:()=>y(b=>b==="light"?"dark":"light"),scheme:i}),[i]);return s(I.Provider,{value:S,children:s(X,p(u({theme:p(u({},e),{colorScheme:i})},r),{children:t}))})},pe=(e,t)=>{const r=l.exports.useRef(!1),a=n=>{r.current||requestAnimationFrame(i=>{t(i,n),r.current=!1}),r.current=!0},o=n=>{const i=e(n);a(i)};l.exports.useEffect(()=>(window.addEventListener("scroll",o),()=>window.removeEventListener("scroll",o)),[])},ge=async()=>{try{const{data:e}=await J.get("https://api.nasa.gov/planetary/apod?api_key=aZs7Z89YLKa1NydBXLjI9DmfbMRwtCLaGTUuDO9O&count=30&thumbs=true");return e.map(r=>p(u({},r),{liked:!1}))}catch(e){const t=e;throw t.response&&(console.log(t.response.status),console.log(t.response.data)),t}};var fe="/spacestagram/assets/banner.46d506b5.jpg",ye="/spacestagram/assets/planet.0b513aeb.svg";const Se=O("li",ce),be=O("li",ue);function we(){const[e,t]=l.exports.useState([]),[r,a]=l.exports.useState(!1),[o,n]=l.exports.useState(!1),[i,y]=l.exports.useState(""),[S,b]=l.exports.useState(1),[A,P]=l.exports.useState(!1),g=l.exports.useRef(null);l.exports.useEffect(()=>{k()},[]),pe(E,(d,c)=>{if(c){const{bannerOutPercentage:m,bannerHeight:w}=c;y(`translateY(${m*.4*w}px) scale(${m>.2?-.5*m+1.1:1})`),b(m>.6?-2.5*m+2.5:1),P(m>.8)}});const B=async()=>{a(!0);const d=await ge();setTimeout(()=>{t([...e,...d]),a(!1)},2e3)},k=async()=>{try{n(!1),await B()}catch(d){const c=d;c.response&&c.response.status===500&&n(!0),a(!1)}};function E(d){var m;const c=(m=g==null?void 0:g.current)==null?void 0:m.getBoundingClientRect();if(c){const{bottom:w,height:_}=c;return{bannerOutPercentage:1-(w-70)/_,bannerHeight:_}}}const F=d=>{const c=[...e];c[d].liked=!c[d].liked,t(c)},R=s(ie,{title:"spacestagram",subtitle:"Image-sharing From The Final Frontier",showSubtitle:A}),j=h("div",{ref:g,className:"banner",children:[s("h1",{style:{transform:i,opacity:S},children:"Image-sharing From The Final Frontier"}),s("img",{src:fe,alt:"A starring universe"})]}),D=s("div",{className:"page__wrapper",children:s(Q,{title:"Astronomy Picture of the Day",children:o?s(ee,{heading:"Oops, the space is too crowded~",action:{content:"Try Again",onAction:()=>k()},image:ye,fullWidth:!0}):h(de,{children:[e.map((d,c)=>s(Se,p(u({},d),{onLike:()=>F(c)}),c)),r&&Array(10).fill(null).map((d,c)=>s(be,{},c))]})})});return h(te,{topBar:R,children:[j,D]})}re.render(s(M.StrictMode,{children:s(se,{i18n:ae,children:s(he,{theme:{colorScheme:"light"},children:s(we,{})})})}),document.getElementById("root"));
